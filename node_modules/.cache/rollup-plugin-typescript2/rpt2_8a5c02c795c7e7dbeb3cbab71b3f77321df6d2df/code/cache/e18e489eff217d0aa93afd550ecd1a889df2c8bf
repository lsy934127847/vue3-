{"code":"import { mutableHandlers, readonlyHandlers, shallowReaciveHandlers, shallowReadonlyHandlers } from \"./baseHandlers\";\r\nimport { isObject } from \"@vue/shared\";\r\nexport function reactive(target) {\r\n    return createReactiveObject(target, false, mutableHandlers);\r\n}\r\nexport function shallowReacive(target) {\r\n    return createReactiveObject(target, false, shallowReaciveHandlers);\r\n}\r\nexport function readonly(target) {\r\n    return createReactiveObject(target, true, readonlyHandlers);\r\n}\r\nexport function shallowReadonly(target) {\r\n    return createReactiveObject(target, true, shallowReadonlyHandlers);\r\n}\r\nconst reactiveMap = new WeakMap(); // 弱引用 对象key不能用对象  map可以是对象\r\n// weakmap 中的key只能是对象 如果引用的key被置为null weakmap会自动回收\r\nconst readonlyMap = new WeakMap();\r\nexport function createReactiveObject(target, isReadonly, baseHandlers) {\r\n    if (!isObject(target)) {\r\n        return target;\r\n    }\r\n    // 创建代理对象 \r\n    const ProxyMap = isReadonly ? readonlyMap : reactiveMap;\r\n    const existsProxy = ProxyMap.get(target);\r\n    if (existsProxy) {\r\n        return existsProxy;\r\n    }\r\n    const proxy = new Proxy(target, baseHandlers);\r\n    reactiveMap.set(target, proxy);\r\n    return proxy;\r\n}\r\n//# sourceMappingURL=reactive.js.map","references":["D:/vue3/packages/reactivity/src/baseHandlers.ts","D:/vue3/packages/shared/src/index.ts"],"map":"{\"version\":3,\"file\":\"reactive.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../packages/reactivity/src/reactive.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,eAAe,EAAE,gBAAgB,EAAE,sBAAsB,EAAE,uBAAuB,EAAE,MAAM,gBAAgB,CAAA;AACnH,OAAO,EAAC,QAAQ,EAAC,MAAM,aAAa,CAAA;AAKpC,MAAM,UAAU,QAAQ,CAAC,MAAa;IAC3B,OAAO,oBAAoB,CAAC,MAAM,EAAC,KAAK,EAAC,eAAe,CAAC,CAAA;AACpE,CAAC;AAED,MAAM,UAAU,cAAc,CAAC,MAAa;IACxC,OAAO,oBAAoB,CAAC,MAAM,EAAC,KAAK,EAAC,sBAAsB,CAAC,CAAA;AACpE,CAAC;AAED,MAAM,UAAU,QAAQ,CAAC,MAAa;IAClC,OAAO,oBAAoB,CAAC,MAAM,EAAC,IAAI,EAAC,gBAAgB,CAAC,CAAA;AAC7D,CAAC;AAED,MAAM,UAAU,eAAe,CAAC,MAAa;IACzC,OAAO,oBAAoB,CAAC,MAAM,EAAC,IAAI,EAAC,uBAAuB,CAAC,CAAA;AACpE,CAAC;AAED,MAAM,WAAW,GAAG,IAAI,OAAO,EAAE,CAAA,CAAE,2BAA2B;AAC9D,kDAAkD;AAClD,MAAM,WAAW,GAAG,IAAI,OAAO,EAAE,CAAA;AAEjC,MAAM,UAAU,oBAAoB,CAAC,MAAM,EAAC,UAAU,EAAC,YAAY;IAE/D,IAAG,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAC;QACjB,OAAO,MAAM,CAAA;KAChB;IAED,UAAU;IACV,MAAM,QAAQ,GAAG,UAAU,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,WAAW,CAAA;IACvD,MAAM,WAAW,GAAG,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,CAAA;IACxC,IAAG,WAAW,EAAC;QACX,OAAO,WAAW,CAAA;KACrB;IACD,MAAM,KAAK,GAAG,IAAI,KAAK,CAAC,MAAM,EAAC,YAAY,CAAC,CAAA;IAC5C,WAAW,CAAC,GAAG,CAAC,MAAM,EAAC,KAAK,CAAC,CAAA;IAC7B,OAAO,KAAK,CAAA;AAChB,CAAC\"}"}
